{{ define "main" }}
<content>
  {{ partial "debugAuto" . }}
  {{ if .Data.Singular }}
    <h3 class="blog-filter">{{ i18n "filtering-for" }} "{{ .Title }}"</h3>
  {{ else }}
    <h2>{{ .Title }}</h2>
  {{ end }}
  {{ partial "list-to-carousel.html" .Content }}
  <ul class="blog-posts">
    {{ $byWeightToggle := .Param "list-by-weight"}}
    {{ $pages := 1 }}
    {{ if $byWeightToggle }}
      {{ $pages = .Pages.ByWeight }}
    {{ else }}
      {{ $pages = .Pages }}
    {{ end }}

    {{ range $pages }}
    <li>
      <span>
        <i>
          <time datetime='{{ .Date.Format "2006-01-02" }}' pubdate>
            {{ .Date.Format (default "2006-01-02" .Site.Params.dateFormat) }}
          </time>
        </i>
      </span>
      {{ if .Params.link }}
        <a href="{{ .Params.link }}" target="_blank">{{ .Title }} â†ª</a>
      {{ else }}
        <a href="{{ .RelPermalink }}">{{ .Title }}</a>
      {{ end }}
    </li>
    {{ else }}
    <li>
      {{ i18n "no-posts" }}
    </li>
    {{ end }}
  </ul>
  {{ if not .Data.Singular }}
    <div>
      {{ range .Site.Taxonomies.tags }}
        <a class="blog-tags" href="{{ .Page.RelPermalink }}">#{{ lower .Page.Title }}</a>
      {{ end }}
    </div>
  {{ end }}
</content>
{{ end }}
